(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/subPages/after-sale/after-sale"],{"00e5":function(t,e,n){"use strict";n.r(e);var s=n("ae09"),i=n.n(s);for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);e["default"]=i.a},1518:function(t,e,n){},"1b54":function(t,e,n){"use strict";n.r(e);var s=n("c1b8"),i=n("00e5");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("9c62");var r=n("2877"),o=Object(r["a"])(i["default"],s["a"],s["b"],!1,null,"1240a61a",null);e["default"]=o.exports},6235:function(t,e,n){"use strict";n("4b50");var s=a(n("b0ce")),i=a(n("1b54"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))},"9c62":function(t,e,n){"use strict";var s=n("1518"),i=n.n(s);i.a},ae09:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=r(n("a34a")),i=r(n("283e")),a=n("78dd");function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,s,i,a,r){try{var o=t[a](r),c=o.value}catch(u){return void n(u)}o.done?e(c):Promise.resolve(c).then(s,i)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(s,i){var a=t.apply(e,n);function r(t){o(a,s,i,r,c,"next",t)}function c(t){o(a,s,i,r,c,"throw",t)}r(void 0)})}}var u={data:function(){return{currenIndex:0,swiperCurrent:0,minHeight:0,windowHeight:0,scrollHeight:0,couponStatus:["售后申请","申请记录"],afterSale:[[],[]]}},onLoad:function(){this._getWindowHeight()},onShow:function(){this._getAfterSaleList()},onNavigationBarButtonTap:function(){t.navigateTo({url:"/pages/mine/subPages/customer-service/customer-service",animationType:"slide-in-right"})},methods:{onDelRecordEvent:function(){var e=c(s.default.mark(function e(n){var i;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=this,t.showModal({content:"确定要删除此记录吗？",success:function(){var e=c(s.default.mark(function e(r){var o;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r.confirm){e.next=5;break}return e.next=3,(0,a.delAftersaleRecord)({token:t.getStorageSync("token"),return_id:n});case 3:o=e.sent,1e4==o.recode&&i._getAfterSaleRecord();case 5:case"end":return e.stop()}},e,this)}));function r(t){return e.apply(this,arguments)}return r}()});case 2:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),_getAfterSaleList:function(){var e=c(s.default.mark(function e(){var n;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"正在加载数据"}),e.next=3,(0,a.getAfterSale)({token:t.getStorageSync("token"),status:2});case 3:n=e.sent,t.hideLoading(),1e4==n.recode?this.$set(this.afterSale,0,n.data||[]):t.showToast({title:n.remsg,icon:"none"});case 6:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),_getAfterSaleRecord:function(){var e=c(s.default.mark(function e(){var n;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"正在加载数据"}),e.next=3,(0,a.getAfterSaleRecord)({token:t.getStorageSync("token")});case 3:n=e.sent,t.hideLoading(),this.$set(this.afterSale,1,n.data||[]);case 6:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),onApplyClick:function(e){t.navigateTo({url:"/pages/mine/subPages/apply/apply?sn="+e.order_sn+"&id="+e.id,animationType:"slide-in-right"})},swiperChange:function(t){this.currenIndex=t.detail.current,this.swiperCurrent=t.detail.current,this._getAfterSaleRecord(),this._getAfterSaleList()},scrollClick:function(t){this.currenIndex=t,this.swiperCurrent=t,this._getAfterSaleRecord(),this._getAfterSaleList()},_getWindowHeight:function(){var e=this;t.getSystemInfo({success:function(t){e.windowHeight=t.windowHeight,e._getSwiperHeight()}})},_getSwiperHeight:function(){var t=[];this.afterSale.forEach(function(e,n){t.push(e.length)});for(var e=0;e<t.length;e++)for(var n=0;n<t.length;n++)if(t[n+1]<t[n]){var s=t[n];t[n]=t[n+1],t[n+1]=s}this.scrollHeight=this.windowHeight-43+"px",this.minHeight=(125*t[0]<this.windowHeight-43?this.windowHeight-43:125*t[0])+"px"}},components:{goodsInfo:i.default}};e.default=u}).call(this,n("6e42")["default"])},c1b8:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"coupon"},[n("scroll-view",{staticClass:"scroll-view_H",attrs:{"scroll-x":"true"}},t._l(t.couponStatus,function(e,s){return n("view",{key:s,staticClass:"scroll-view-item_H",class:{active:t.currenIndex==s},attrs:{eventid:"759d4d97-0-"+s},on:{tap:function(e){t.scrollClick(s)}}},[t._v(t._s(e))])})),n("swiper",{staticClass:"swiper",style:{height:t.minHeight},attrs:{current:t.swiperCurrent,eventid:"759d4d97-4"},on:{change:t.swiperChange}},t._l(t.afterSale,function(e,s){return n("swiper-item",{key:s,attrs:{mpcomid:"759d4d97-0-"+s}},[n("scroll-view",{style:{height:t.scrollHeight},attrs:{"scroll-y":"true"}},[0==s?n("block",[t._l(e,function(e,i){return n("view",{key:i,staticClass:"swiper-item"},[n("view",{staticClass:"goods-status"},[t._v(t._s(e.order_status))]),t._l(e.data,function(e,s){return n("view",{key:s,staticClass:"swiper-top"},[n("image",{attrs:{src:e.goods_image}}),n("view",{staticClass:"goods-info"},[n("view",{staticClass:"goods-name"},[t._v(t._s(e.goods_name))]),n("view",{staticClass:"goods-price"},[t._v("￥"+t._s(e.shop_price))])]),n("view",{staticClass:"goods-num"},[n("view",{staticClass:"goods-num"},[t._v("×"+t._s(e.num))])])])}),n("view",{staticClass:"goods-total"},[t._v("共"+t._s(e.snum)+"件商品 合计：¥ "+t._s(e.sprice))]),n("view",{staticClass:"goods-btn"},[n("view",{attrs:{eventid:"759d4d97-1-"+s+"-"+i},on:{tap:function(n){t.onApplyClick(e)}}},[t._v("申请售后")])])],2)}),e.length<=0?n("view",{staticClass:"item nodata"},[n("image",{attrs:{src:"/static/images/mine/nodata1.png"}}),n("view",[t._v("没有更多了...")])]):t._e()],2):t._e(),1==s?n("block",[t._l(e,function(e,i){return n("view",{key:i,staticClass:"swiper-item"},[n("view",{staticClass:"goods-status"},[t._v(t._s(e.order_status))]),t._l(e.data||e.xorders,function(e,s){return n("view",{key:s,staticClass:"swiper-top"},[n("image",{attrs:{src:e.goods_image}}),n("view",{staticClass:"goods-info"},[n("view",{staticClass:"goods-name"},[t._v(t._s(e.goods_name))]),n("view",{staticClass:"goods-price"},[t._v("￥"+t._s(e.shop_price))])]),n("view",{staticClass:"goods-num"},[n("view",{staticClass:"goods-num"},[t._v("×"+t._s(e.num))])])])}),n("view",{staticClass:"goods-total"},[t._v("共"+t._s(e.snum||e.num)+"件商品 合计：¥ "+t._s(e.sprice||e.order_price))]),n("view",{staticClass:"goods-btn"},["待收货"==e.order_status?n("view",{attrs:{eventid:"759d4d97-2-"+s+"-"+i},on:{tap:function(n){t.onApplyClick(e)}}},[t._v("申请售后")]):t._e(),e.state?n("view",{attrs:{eventid:"759d4d97-3-"+s+"-"+i},on:{tap:function(n){t.onDelRecordEvent(e.id)}}},[t._v("删除")]):t._e(),e.state?n("view",[t._v(t._s(e.state))]):t._e()])],2)}),e.length<=0?n("view",{staticClass:"item nodata"},[n("image",{attrs:{src:"/static/images/mine/nodata1.png"}}),n("view",[t._v("没有更多了...")])]):t._e()],2):t._e()],1)],1)}))],1)},i=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i})}},[["6235","common/runtime","common/vendor"]]]);