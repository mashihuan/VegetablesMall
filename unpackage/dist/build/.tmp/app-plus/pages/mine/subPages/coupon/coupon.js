(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/subPages/coupon/coupon"],{"06e2":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"coupon"},[n("scroll-view",{staticClass:"scroll-view_H",attrs:{"scroll-x":"true"}},t._l(t.couponStatus,function(e,i){return n("view",{key:i,staticClass:"scroll-view-item_H",class:{active:t.currenIndex==i},attrs:{id:"demo1",eventid:"0540c552-0-"+i},on:{tap:function(e){t.scrollClick(i)}}},[t._v(t._s(e))])})),n("swiper",{staticClass:"swiper",style:{height:t.minHeight},attrs:{current:t.swiperCurrent,eventid:"0540c552-1"},on:{change:t.swiperChange}},t._l(t.couponList,function(e,i){return n("swiper-item",{key:i,attrs:{mpcomid:"0540c552-0-"+i}},[n("scroll-view",{style:{height:t.scrollHeight},attrs:{"scroll-y":"true"}},[t._l(e,function(e,s){return n("view",{key:s,staticClass:"swiper-item"},[n("view",{staticClass:"coupon-item",class:{used:1==i,past:2==i}},[n("view",{staticClass:"coupon-left"},[n("view",{staticClass:"coupon-money"},[n("text",[t._v("￥")]),t._v(t._s(e.subtract_price))]),n("view",{staticClass:"coupon-range"},[t._v("满"+t._s(e.buy_price)+"元可用")])]),n("view",{staticClass:"coupon-right"},[n("view",{staticClass:"coupon-type"},[t._v(t._s(e.applicable_name))]),n("view",{staticClass:"coupon-time"},[t._v("有效时间"+t._s(e.begin_time)+"-"+t._s(e.end_time))])])])])}),e.length<=0?n("view",{staticClass:"nodata"},[n("image",{attrs:{src:"/static/images/mine/nodata2.png"}}),n("view",[t._v("没有更多了...")])]):t._e()],2)],1)}))],1)},s=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})},"1cea":function(t,e,n){"use strict";var i=n("2f1b"),s=n.n(i);s.a},"27c2":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a")),s=n("78dd");function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,i,s,o,r){try{var c=t[o](r),a=c.value}catch(u){return void n(u)}c.done?e(a):Promise.resolve(a).then(i,s)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var o=t.apply(e,n);function c(t){r(o,i,s,c,a,"next",t)}function a(t){r(o,i,s,c,a,"throw",t)}c(void 0)})}}var a={data:function(){return{currenIndex:0,swiperCurrent:0,minHeight:0,windowHeight:0,scrollHeight:0,couponStatus:["未使用","已使用","已过期"],couponList:[[],[],[]]}},onLoad:function(t){console.log(t),this._getWindowHeight(),this._getCoupon(0)},methods:{_getCoupon:function(){var e=c(i.default.mark(function e(n){var o,r;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"正在加载数据..."}),e.next=3,(0,s.getCoupon)({token:t.getStorageSync("token"),type:n});case 3:o=e.sent,t.hideLoading(),r=o.data||[],this.$set(this.couponList,n,r);case 7:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),swiperChange:function(t){this.currenIndex=t.detail.current,this._getCoupon(t.detail.current),console.log(t.detail.current)},scrollClick:function(t){this.currenIndex=t,this.swiperCurrent=t},_getWindowHeight:function(){var e=this;t.getSystemInfo({success:function(t){e.windowHeight=t.windowHeight,e._getSwiperHeight()}})},_getSwiperHeight:function(){var t=[];this.couponList.forEach(function(e,n){t.push(e.length)});for(var e=0;e<t.length;e++)for(var n=0;n<t.length;n++)if(t[n+1]<t[n]){var i=t[n];t[n]=t[n+1],t[n+1]=i}this.scrollHeight=this.windowHeight-43+"px",this.minHeight=(180*t[0]<this.windowHeight-33?this.windowHeight-33:180*t[0])+"px"}}};e.default=a}).call(this,n("6e42")["default"])},"2f1b":function(t,e,n){},"38c2":function(t,e,n){"use strict";n.r(e);var i=n("06e2"),s=n("e105");for(var o in s)"default"!==o&&function(t){n.d(e,t,function(){return s[t]})}(o);n("1cea");var r=n("2877"),c=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"d79fdf3c",null);e["default"]=c.exports},"8b41":function(t,e,n){"use strict";n("4b50");var i=o(n("b0ce")),s=o(n("38c2"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))},e105:function(t,e,n){"use strict";n.r(e);var i=n("27c2"),s=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=s.a}},[["8b41","common/runtime","common/vendor"]]]);