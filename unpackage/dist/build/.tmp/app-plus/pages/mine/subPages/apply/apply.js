(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/subPages/apply/apply"],{1223:function(e,t,n){"use strict";n.r(t);var a=n("45e1"),i=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);t["default"]=i.a},23039:function(e,t,n){"use strict";n.r(t);var a=n("dd32"),i=n("1223");for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);n("9205");var o=n("2877"),r=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,"04ee83d4",null);t["default"]=r.exports},"2da8":function(e,t,n){},"45e1":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(n("a34a")),i=c(n("7fb6")),s=c(n("045a")),o=n("78dd"),r=c(n("31c2"));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,a,i,s,o){try{var r=e[s](o),c=r.value}catch(l){return void n(l)}r.done?t(c):Promise.resolve(c).then(a,i)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var s=e.apply(t,n);function o(e){l(s,a,i,o,r,"next",e)}function r(e){l(s,a,i,o,r,"throw",e)}o(void 0)})}}var d={data:function(){return{imgList:[],applyType:"选择申请类型",applyTypeList:[],addressInfo:{},content:"",order_id:"",name:"",phone:"",address:""}},onLoad:function(e){this._getAfterSaleInfo(e.sn)},methods:{_getAfterSaleInfo:function(){var t=u(a.default.mark(function t(n){var i;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.showLoading({title:"正在加载数据..."}),t.next=3,(0,o.afterSalePage)({token:e.getStorageSync("token"),order_sn:n});case 3:i=t.sent,e.hideLoading(),1e4==i.recode?(this.applyTypeList=i.data.type,this.addressInfo=i.data.order_sn):this.applyTypeList=[];case 6:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}(),buttonClick:function(){var t=u(a.default.mark(function t(){var n;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("选择申请类型"!=this.applyType){t.next=3;break}return e.showToast({title:"请选择申请类型",icon:"none"}),t.abrupt("return");case 3:if(""!=this.name){t.next=6;break}return e.showToast({title:"请输入联系人姓名",icon:"none"}),t.abrupt("return");case 6:if(""!=this.phone){t.next=9;break}return e.showToast({title:"请输入联系电话",icon:"none"}),t.abrupt("return");case 9:return t.next=11,(0,o.submitAfterSale)({token:e.getStorageSync("token"),type:this.applyType,images:this.imgList.join(","),order_sn:this.addressInfo,content:this.content,name:this.name,phone:this.phone,address:this.address});case 11:n=t.sent,1e4==n.recode?(e.showToast({title:"申请成功"}),setTimeout(function(){e.navigateBack()},1500)):e.showToast({title:n.remsg,icon:"none"});case 13:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),addImg:function(){var t=this;e.chooseImage({count:1,success:function(n){var a=n.tempFilePaths;e.uploadFile({url:o.BASE_URL+"/api/common/upload",filePath:a[0],name:"file",formData:{token:e.getStorageSync("token")},success:function(e){console.log(JSON.stringify(e.data));var n=JSON.parse(e.data);20026==n.recode&&t.imgList.push(o.BASE_URL+n.data.url)}})}})},deleteImg:function(e){this.imgList.splice(e,1)},cellClick:function(){var t=this;e.showActionSheet({itemList:t.applyTypeList,success:function(e){t.applyType=t.applyTypeList[e.tapIndex]}})}},components:{listCell:i.default,clickButton:s.default,uniIcon:r.default}};t.default=d}).call(this,n("6e42")["default"])},8534:function(e,t,n){"use strict";n("4b50");var a=s(n("b0ce")),i=s(n("23039"));function s(e){return e&&e.__esModule?e:{default:e}}Page((0,a.default)(i.default))},9205:function(e,t,n){"use strict";var a=n("2da8"),i=n.n(a);i.a},dd32:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:"apply",staticStyle:{"min-height":"100%"}},[n("list-cell",{attrs:{title:"申请类型",value:e.applyType,cellClick:e.cellClick,mpcomid:"5255beb5-0"}}),n("view",{staticClass:"apply-content"},[n("view",{staticClass:"title"},[e._v("详细说明")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入您的详细说明",eventid:"5255beb5-0"},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}}),n("view",{staticClass:"title"},[e._v("上传图片")]),n("view",{staticClass:"imageList"},[e._l(e.imgList,function(t,a){return n("view",{key:a,staticClass:"img-wrap"},[n("image",{attrs:{src:t}}),n("view",{staticClass:"close-icon iconfont",attrs:{eventid:"5255beb5-1-"+a},on:{tap:function(t){e.deleteImg(a)}}},[e._v("")])])}),n("view",{staticClass:"add-btn",attrs:{eventid:"5255beb5-2"},on:{tap:e.addImg}})],2),n("view",{staticClass:"apply-personal"},[n("view",{staticClass:"item"},[n("view",[e._v("联系人：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"输入姓名",eventid:"5255beb5-3"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),n("view",{staticClass:"item"},[n("view",[e._v("联系电话：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"text",placeholder:"输入联系电话",eventid:"5255beb5-4"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),n("view",{staticClass:"item"},[n("view",[e._v("联系地址：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.address,expression:"address"}],attrs:{type:"text",placeholder:"输入联系地址",eventid:"5255beb5-5"},domProps:{value:e.address},on:{input:function(t){t.target.composing||(e.address=t.target.value)}}})])])]),n("click-button",{attrs:{text:"提交",buttonClick:e.buttonClick,mpcomid:"5255beb5-1"}})],1)},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})}},[["8534","common/runtime","common/vendor"]]]);