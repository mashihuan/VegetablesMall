(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/subPages/member/member"],{"13f3":function(e,t,n){"use strict";var r=n("3b2c"),a=n.n(r);a.a},"3b2c":function(e,t,n){},7498:function(e,t,n){"use strict";n.r(t);var r=n("d135"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);t["default"]=a.a},af3c:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:"wrap",staticStyle:{height:"100%",background:"#fff"}},[n("view",{staticStyle:{background:"#fff","padding-bottom":"30px"}},[n("view",{staticClass:"member"},[n("view",{staticClass:"member-content"},[n("view",{staticClass:"member-advantage"},e._l(e.memberAdvantage,function(t,r){return n("view",{key:r,staticClass:"advantage-item"},[n("image",{attrs:{src:t.icon}}),n("text",[e._v(e._s(t.text))])])})),n("view",{staticClass:"member-type"},e._l(e.memberType,function(t,r){return n("view",{key:r,staticClass:"member-item",class:{active:e.memberCurrentIndex==r},attrs:{eventid:"38889a52-0-"+r},on:{tap:function(n){e.memberTypeClick(t,r)}}},[n("view",{staticClass:"member-day"},[e._v(e._s(t.name)+"   "+e._s(t.days+"天"))]),n("view",{staticClass:"member-price"},[e._v(e._s("￥"+t.money))])])})),n("pay-methods",{attrs:{eventid:"38889a52-1",mpcomid:"38889a52-0"},on:{payTypeClick:e.payTypeClick}})],1)]),0==e.isVip?n("click-button",{attrs:{text:"立即开通",buttonClick:e.buttonClick,mpcomid:"38889a52-2"}}):n("click-button",{attrs:{text:"续费",buttonClick:e.buttonClick,mpcomid:"38889a52-1"}})],1)])},a=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},d135:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("a34a")),a=o(n("3db3")),i=o(n("045a")),s=n("78dd");function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,a,i,s){try{var o=e[i](s),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function s(e){u(i,r,a,s,o,"next",e)}function o(e){u(i,r,a,s,o,"throw",e)}s(void 0)})}}var l={data:function(){return{memberAdvantage:[{icon:"/static/images/mine/wode-hy-icon1@2x.png",text:"特价"},{icon:"/static/images/mine/wode-hy-icon2@2x.png",text:"两倍积分"}],memberType:[],memberCurrentIndex:0,payCurrentIndex:0,payMethods:"",isVip:0}},onLoad:function(){this._getMemberSet()},onShow:function(){this._getPersonalInfo()},methods:{_getMemberSet:function(){var t=c(r.default.mark(function t(){var n;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.showLoading({title:"正在加载数据..."}),t.next=3,(0,s.getMemberSet)({token:e.getStorageSync("token")});case 3:if(n=t.sent,e.hideLoading(),this.memberType=n.data,10001!=n.recode){t.next=9;break}return e.redirectTo({url:"/pages/login/login/login",animationType:"slide-in-right"}),t.abrupt("return");case 9:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),_getPersonalInfo:function(){var t=c(r.default.mark(function t(){var n;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.getPersonalInfo)({token:e.getStorageSync("token")});case 2:if(n=t.sent,this.isVip=n.data.is_vip,10001!=n.recode){t.next=7;break}return e.redirectTo({url:"/pages/login/login/login",animationType:"slide-in-right"}),t.abrupt("return");case 7:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),memberTypeClick:function(e,t){this.memberCurrentIndex=t},payTypeClick:function(e){this.payCurrentIndex=e},buttonClick:function(){var t=c(r.default.mark(function t(){var n;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:t.t0=this.payCurrentIndex,t.next=0===t.t0?3:1===t.t0?5:2===t.t0?7:9;break;case 3:return this.payMethods="alipay",t.abrupt("break",9);case 5:return this.payMethods="wechat",t.abrupt("break",9);case 7:return this.payMethods="burse",t.abrupt("break",9);case 9:return t.next=11,(0,s.buyMember)({token:e.getStorageSync("token"),money:this.memberType[this.memberCurrentIndex].money,days:this.memberType[this.memberCurrentIndex].days,type:this.payMethods});case 11:if(n=t.sent,0!=this.payCurrentIndex){t.next=15;break}return e.requestPayment({provider:"alipay",orderInfo:n,success:function(t){"requestPayment:ok"==t.errMsg&&e.navigateTo({url:"/pages/success/index?title=购买成功"})},fail:function(t){console.log("err:"+JSON.stringify(t)),e.redirectTo({url:"/pages/fail/index?title=购买失败"})}}),t.abrupt("return");case 15:if(1!=this.payCurrentIndex){t.next=19;break}return e.requestPayment({provider:"wxpay",orderInfo:n,success:function(t){console.log("success:"+JSON.stringify(t)),"requestPayment:ok"==t.errMsg&&e.redirectTo({url:"/pages/success/index?title=购买成功"})},fail:function(t){console.log("err:"+JSON.stringify(t)),e.redirectTo({url:"/pages/fail/index?title=购买失败"})}}),t.abrupt("return");case 19:1e4==n.recode?e.navigateTo({url:"/pages/success/index?title=购买成功"}):e.showToast({title:n.remsg,icon:"none"});case 20:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()},components:{payMethods:a.default,clickButton:i.default}};t.default=l}).call(this,n("6e42")["default"])},f6ed:function(e,t,n){"use strict";n("4b50");var r=i(n("b0ce")),a=i(n("fcb8"));function i(e){return e&&e.__esModule?e:{default:e}}Page((0,r.default)(a.default))},fcb8:function(e,t,n){"use strict";n.r(t);var r=n("af3c"),a=n("7498");for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);n("13f3");var s=n("2877"),o=Object(s["a"])(a["default"],r["a"],r["b"],!1,null,"5e7aaa21",null);t["default"]=o.exports}},[["f6ed","common/runtime","common/vendor"]]]);