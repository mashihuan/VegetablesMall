(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/subPages/message/message"],{"0c40":function(t,e,i){"use strict";var n=i("3574"),s=i.n(n);s.a},"115b":function(t,e,i){"use strict";i.r(e);var n=i("d8c3"),s=i("9408");for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);i("0c40");var a=i("2877"),r=Object(a["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},"1a27":function(t,e,i){"use strict";i.r(e);var n=i("8d1b"),s=i("8e43");for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);i("aecb");var a=i("2877"),r=Object(a["a"])(s["default"],n["a"],n["b"],!1,null,"5fc70085",null);e["default"]=r.exports},3574:function(t,e,i){},5453:function(t,e,i){"use strict";i("4b50");var n=o(i("b0ce")),s=o(i("1a27"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(s.default))},"61cd":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniSwipeAction",props:{isDrag:{type:Boolean,default:!1},isOpened:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autoClose:{type:Boolean,default:!0},options:{type:Array,default:function(){return[]}}},data:function(){var t=this.__call_hook?"uni_swipe_action":"Uni_".concat(Math.ceil(1e6*Math.random()).toString(36));return{elId:t,isShowBtn:!1,transformX:"translateX(0px)"}},watch:{isOpened:function(t,e){this.isShowBtn=!!t,this.endMove()}},created:function(){this.direction="",this.startX=0,this.startY=0,this.btnGroupWidth=0,this.isMoving=!1,this.startTime=0},onReady:function(){this.getSize()},methods:{getSize:function(){var e=this;t.createSelectorQuery().in(this).select("#".concat(this.elId)).boundingClientRect().exec(function(t){e.btnGroupWidth=t[0].width}),this.isOpened&&(this.isShowBtn=!0,this.endMove())},bindClickBtn:function(t,e){this.$emit("click",{text:t.text,style:t.style,index:e})},bindClickCont:function(t){this.isShowBtn&&this.autoClose&&(this.isShowBtn=!1,this.endMove())},touchStart:function(t){this.startTime=t.timeStamp,this.startX=t.touches[0].pageX,this.startY=t.touches[0].pageY},touchMove:function(t){if("Y"!==this.direction&&!this.disabled){var e=t.touches[0].pageY-this.startY,i=t.touches[0].pageX-this.startX;if(!this.isMoving&&Math.abs(e)>Math.abs(i))this.direction="Y";else if(this.direction=i>0?"right":"left",this.isMoving=!0,this.isDrag){var n=this.isShowBtn?-this.btnGroupWidth:0;if(n+i>=0)return void(this.transformX="translateX(0px)");if(-n-i>=this.btnGroupWidth)return void(this.transformX="translateX(".concat(-this.btnGroupWidth,"px)"));n-i>0?this.transformX="translateX(".concat(i,"px)"):i>=-this.btnGroupWidth&&(this.transformX="translateX(".concat(i-this.btnGroupWidth,"px)"))}}},touchEnd:function(t){if(this.isMoving=!1,"right"===this.direction||"left"===this.direction){if(this.isDrag){var e=Math.abs(Number(this.transformX.slice(11,-3))),i=t.timeStamp-this.startTime;this.isShowBtn=e>=this.btnGroupWidth/2,i>50&&i<300&&e>20&&("right"===this.direction?this.isShowBtn=!1:this.isShowBtn=!0)}else"right"===this.direction?this.isShowBtn=!1:this.isShowBtn=!0;this.endMove()}else this.direction=""},endMove:function(){"Y"===this.direction||this.disabled?this.direction="":(this.isShowBtn?(this.transformX="translateX(".concat(-this.btnGroupWidth,"px)"),this.$emit("opened")):(this.transformX="translateX(0px)",this.$emit("closed")),this.direction="")},close:function(){this.isShowBtn=!1,this.endMove()}}};e.default=i}).call(this,i("6e42")["default"])},8850:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("a34a")),s=a(i("115b")),o=i("78dd");function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i,n,s,o,a){try{var r=t[o](a),c=r.value}catch(u){return void i(u)}r.done?e(c):Promise.resolve(c).then(n,s)}function c(t){return function(){var e=this,i=arguments;return new Promise(function(n,s){var o=t.apply(e,i);function a(t){r(o,n,s,a,c,"next",t)}function c(t){r(o,n,s,a,c,"throw",t)}a(void 0)})}}var u={data:function(){return{message:[],options2:[{text:"删除",style:{backgroundColor:"rgb(255,58,49)"}}]}},onLoad:function(){},onShow:function(){this._getMessageList()},onPullDownRefresh:function(t){this._getMessageList()},methods:{_getMessageList:function(){var e=c(n.default.mark(function e(){var i;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"正在加载数据..."}),e.next=3,(0,o.getMessageList)({token:t.getStorageSync("token")});case 3:i=e.sent,t.hideLoading(),t.stopPullDownRefresh(),this.message=i.data||[];case 7:case"end":return e.stop()}},e,this)}));function i(){return e.apply(this,arguments)}return i}(),delMessage:function(){var e=c(n.default.mark(function e(i){var s;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:s=this,t.showModal({content:"确定要删除此条消息吗？",success:function(e){e.confirm&&(0,o.deleteMessage)({token:t.getStorageSync("token"),me_id:i.id}).then(function(e){1e4==e.recode?(s._getMessageList(),t.showToast({title:"消息删除成功"})):t.shoToast({title:e.remsg})})}});case 2:case"end":return e.stop()}},e,this)}));function i(t){return e.apply(this,arguments)}return i}(),switchTo:function(){var e=c(n.default.mark(function e(i,s){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.readMessage)({token:t.getStorageSync("token"),me_id:i.id,type:i.type});case 2:e.sent,t.navigateTo({url:"/pages/mine/subPages/messageDetail/messageDetail?title=".concat(i.title,"&id=").concat(i.id),animationType:"slide-in-right"});case 4:case"end":return e.stop()}},e,this)}));function i(t,i){return e.apply(this,arguments)}return i}()},components:{uniSwipeAction:s.default}};e.default=u}).call(this,i("6e42")["default"])},"8d1b":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"container"},[t._l(t.message,function(e,n){return i("view",{key:n,staticStyle:{"margin-bottom":"10rpx"},attrs:{eventid:"39b5a1b2-1-"+n},on:{longtap:function(i){t.delMessage(e)}}},[i("view",{staticClass:"message-item",attrs:{eventid:"39b5a1b2-0-"+n},on:{tap:function(i){t.switchTo(e,n)}}},[0==e.reading_state?i("view",{staticClass:"read-status"},[i("view")]):t._e(),i("view",{staticClass:"message-title"},[i("view",{staticClass:"message-type"},[t._v(t._s(e.title))]),i("view",{staticClass:"message-time"},[t._v(t._s(e.create_time))])]),i("view",{staticClass:"message-content"},[t._v(t._s(e.content))])])])}),t.message.length<=0?i("view",{staticClass:"nodata"},[i("image",{attrs:{src:"/static/images/mine/nodata2.png"}}),i("view",[t._v("没有更多了...")])]):t._e()],2)},s=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})},"8e43":function(t,e,i){"use strict";i.r(e);var n=i("8850"),s=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=s.a},9408:function(t,e,i){"use strict";i.r(e);var n=i("61cd"),s=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=s.a},aecb:function(t,e,i){"use strict";var n=i("d573"),s=i.n(n);s.a},d573:function(t,e,i){},d8c3:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"uni-swipe-action"},[i("view",{staticClass:"uni-swipe-action__container",class:{"uni-swipe-action--show":t.isShowBtn},style:{transform:t.transformX,"-webkit-transform":t.transformX},attrs:{eventid:"588349d4-1"},on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd,touchcancel:t.touchEnd,click:t.bindClickCont}},[i("view",{staticClass:"uni-swipe-action__content"},[t._t("default",null,{mpcomid:"588349d4-0"})],2),i("view",{staticClass:"uni-swipe-action__btn-group",attrs:{id:t.elId}},t._l(t.options,function(e,n){return i("div",{key:n,staticClass:"uni-swipe-action--btn",style:{backgroundColor:e.style&&e.style.backgroundColor?e.style.backgroundColor:"#C7C6CD",color:e.style&&e.style.color?e.style.color:"#FFFFFF",fontSize:e.style&&e.style.fontSize?e.style.fontSize:"28upx"},attrs:{eventid:"588349d4-0-"+n},on:{click:function(i){t.bindClickBtn(e,n)}}},[t._v(t._s(e.text))])}))]),t.isShowBtn?i("view",{staticClass:"uni-swipe-action__mask",attrs:{eventid:"588349d4-2"},on:{click:t.close,touchmove:function(e){e.stopPropagation(),e.preventDefault(),t.close(e)}}}):t._e()])},s=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})}},[["5453","common/runtime","common/vendor"]]]);