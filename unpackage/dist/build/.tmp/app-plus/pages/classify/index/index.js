(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/classify/index/index"],{"01a1":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("a34a")),s=n(a("8bf7")),o=a("78dd");function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,a,i,s,o,n){try{var r=t[o](n),c=r.value}catch(l){return void a(l)}r.done?e(c):Promise.resolve(c).then(i,s)}function c(t){return function(){var e=this,a=arguments;return new Promise(function(i,s){var o=t.apply(e,a);function n(t){r(o,i,s,n,c,"next",t)}function c(t){r(o,i,s,n,c,"throw",t)}n(void 0)})}}var l={data:function(){return{categoryList:[],subCategoryList:[],searchList:[],searchText:"",height:0,categoryActive:0,type:1,scrollTop:0,scrollHeight:0,isFocus:!1,color1:"",color2:"",color3:"",color4:""}},components:{uParse:s.default},onLoad:function(){},onReady:function(){this._changeFontColor()},onShow:function(){this._getClassifyLeft(),this._getFocusStatus(),this._setInputFocus(),this.height=t.getSystemInfoSync().windowHeight},onHide:function(){this._removeFocusStatus(),t.removeStorageSync("gridId")},onNavigationBarSearchInputChanged:function(){var t=c(i.default.mark(function t(e){var a;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.searchText=e.text,t.next=3,(0,o.getSearchFood)({title:e.text});case 3:a=t.sent,this.searchList=a.data||[];case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),methods:{_changeFontColor:function(){var t=c(i.default.mark(function t(){var e;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,o.changeFontColor)();case 2:e=t.sent,console.log(e.data),1e4==e.recode&&(this.color1=e.data[0][1],this.color2=e.data[1][1],this.color3=e.data[2][1],this.color4=e.data[3][1]);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),addShopCar:function(){var e=c(i.default.mark(function e(a){var s;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$dealLogin(),e.next=3,(0,o.addGoodsToCar)({token:t.getStorageSync("token"),xgoods_id:a.id,num:1});case 3:s=e.sent,1e4==s.recode?t.showToast({title:"加入购物车成功"}):t.showToast({title:s.remsg});case 5:case"end":return e.stop()}},e,this)}));function a(t){return e.apply(this,arguments)}return a}(),goToDetail:function(e){t.navigateTo({url:"/pages/home/subPages/mealDetail/mealDetail?id="+e.id,animationType:"slide-in-right"})},_getClassifyLeft:function(){var e=c(i.default.mark(function e(){var a,s,n,r,c;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getStorageSync("gridId"),this.categoryActive=0,this.subCategoryList=[],t.showLoading({title:"正在加载数据..."}),s=0,n=2,e.next=8,(0,o.getClassifyLeft)();case 8:return r=e.sent,a?(s=a,n=2,this.categoryActive=a):(s=r.data[0].id,n=r.data[0].type),e.next=12,(0,o.getClassifyRight)({c_id:s,type:n});case 12:c=e.sent,t.hideLoading(),this.categoryList=r.data||[],this.subCategoryList=c.data||[];case 16:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}(),hideSearchBg:function(t){t.stopPropagation(),t.preventDefault(),this.searchText=""},_setInputFocus:function(){var t=getCurrentPages(),e=t[t.length-1],a=e.$getAppWebview(),i=a.getStyle().titleNView;a.setStyle({titleNView:i})},_getFocusStatus:function(){var e=this;t.getStorage({key:"focus",success:function(t){e.isFocus=!0}})},_removeFocusStatus:function(){t.removeStorage({key:"focus"}),this.isFocus=!1},scroll:function(t){this.scrollHeight=t.detail.scrollHeight},categoryClickMain:function(){var e=c(i.default.mark(function e(a,s){var n;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(1),t.showLoading({title:"正在加载数据..."}),this.categoryActive=a.id,e.next=5,(0,o.getClassifyRight)({c_id:a.id,type:a.type});case 5:n=e.sent,t.hideLoading(),this.subCategoryList=n.data||[],this.scrollTop=-this.scrollHeight*s;case 9:case"end":return e.stop()}},e,this)}));function a(t,a){return e.apply(this,arguments)}return a}()}};e.default=l}).call(this,a("6e42")["default"])},"045c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"container"},[t.searchText?a("view",{staticClass:"search-bg"},[a("scroll-view",{staticClass:"nav-right",style:"height:"+t.height+"px",attrs:{"scroll-y":"","scroll-top":t.scrollTop,"scroll-with-animation":"",eventid:"7fde1a5a-5"},on:{scroll:t.scroll}},[t._l(t.searchList,function(e,i){return a("view",{key:i,staticClass:"nav-right-item",attrs:{id:0===i?"first":""}},[a("view",{staticClass:"img-wrap",staticStyle:{position:"relative"}},[a("image",{attrs:{"lazy-load":"true",src:e.goods_image,eventid:"7fde1a5a-0-"+i},on:{tap:function(a){a.stopPropagation(),t.goToDetail(e)}}}),e.restrictions_num?a("view",{staticClass:"item-limit"},[t._v("限"+t._s(e.restrictions_num)+"份")]):t._e()]),a("view",{staticClass:"item-content"},[a("view",{staticClass:"item-name ellipsis",attrs:{eventid:"7fde1a5a-1-"+i},on:{tap:function(a){a.stopPropagation(),t.goToDetail(e)}}},[t._v(t._s(e.name))]),a("view",{staticClass:"item-desc ellipsis",style:{color:t.color1},attrs:{eventid:"7fde1a5a-2-"+i},on:{tap:function(a){a.stopPropagation(),t.goToDetail(e)}}},[t._v(t._s(e.content))]),a("view",{staticClass:"item-desc item-remark ellipsis",style:{color:t.color2},attrs:{eventid:"7fde1a5a-3-"+i},on:{tap:function(a){a.stopPropagation(),t.goToDetail(e)}}},[t._v(t._s(e.remark))]),a("view",{staticClass:"item-bottom"},[a("view",[0!=e.cheap_price&&0!=e.cheap_price?a("view",{staticClass:"cheap_price",style:{color:t.color3}},[t._v(t._s(e.cheap)+":"+t._s("￥"+e.cheap_price))]):t._e(),a("text",{class:{decoration:0!=e.cheap_price&&0!=e.cheap_price},style:{color:t.color4}},[t._v("原价:"+t._s("￥"+e.price))])]),a("image",{attrs:{src:"/static/images/classify/fenlei-icon-jia@2x.png",eventid:"7fde1a5a-4-"+i},on:{tap:function(a){t.addShopCar(e)}}})])])])}),t.searchList.length<=0?a("view",{staticClass:"nodata",staticStyle:{"padding-top":"20rpx"}},[a("view",[t._v("没有匹配到内容...")])]):t._e()],2),a("view",{staticClass:"search-mask",attrs:{eventid:"7fde1a5a-6"},on:{tap:function(e){e.stopPropagation(),t.hideSearchBg(e)}}})],1):t._e(),a("view",{staticClass:"page-body"},[a("scroll-view",{staticClass:"nav-left",style:"height:"+t.height+"px",attrs:{"scroll-y":""}},t._l(t.categoryList,function(e,i){return e.name?a("view",{key:i,staticClass:"nav-left-item",class:e.id==t.categoryActive?"active":"",attrs:{eventid:"7fde1a5a-7-"+i},on:{tap:function(a){t.categoryClickMain(e,i)}}},[t._v(t._s(e.name))]):t._e()})),a("scroll-view",{staticClass:"nav-right",style:"height:"+t.height+"px",attrs:{"scroll-y":"","scroll-top":t.scrollTop,"scroll-with-animation":"",eventid:"7fde1a5a-13"},on:{scroll:t.scroll}},[t._l(t.subCategoryList,function(e,i){return a("view",{key:i,staticClass:"nav-right-item",attrs:{id:0===i?"first":""}},[a("view",{staticClass:"img-wrap",staticStyle:{position:"relative"}},[a("image",{attrs:{"lazy-load":"true",src:e.goods_image,eventid:"7fde1a5a-8-"+i},on:{tap:function(a){a.stopPropagation(),t.goToDetail(e)}}}),e.restrictions_num?a("view",{staticClass:"item-limit"},[t._v("限"+t._s(e.restrictions_num)+"份")]):t._e()]),a("view",{staticClass:"item-content"},[a("view",{staticClass:"item-name ellipsis",attrs:{eventid:"7fde1a5a-9-"+i},on:{tap:function(a){a.stopPropagation(),t.goToDetail(e)}}},[t._v(t._s(e.name))]),a("view",{staticClass:"item-desc ellipsis",style:{color:t.color1},attrs:{eventid:"7fde1a5a-10-"+i},on:{tap:function(a){a.stopPropagation(),t.goToDetail(e)}}},[t._v(t._s(e.content))]),a("view",{staticClass:"item-desc item-remark ellipsis",style:{color:t.color2},attrs:{eventid:"7fde1a5a-11-"+i},on:{tap:function(a){a.stopPropagation(),t.goToDetail(e)}}},[t._v(t._s(e.remark))]),a("view",{staticClass:"item-bottom"},[a("view",[0!=e.cheap_price&&0!=e.cheap_price?a("view",{staticClass:"cheap_price",style:{color:t.color3}},[t._v(t._s(e.cheap)+":"+t._s("￥"+e.cheap_price))]):t._e(),a("text",{class:{decoration:0!=e.cheap_price&&0!=e.cheap_price},style:{color:t.color4}},[t._v("原价:"+t._s("￥"+e.price))])]),a("image",{attrs:{src:"/static/images/classify/fenlei-icon-jia@2x.png",eventid:"7fde1a5a-12-"+i},on:{tap:function(a){t.addShopCar(e)}}})])])])}),t.subCategoryList.length<=0?a("view",{staticClass:"nodata"},[a("image",{attrs:{src:"/static/images/mine/noContent.png"}}),a("view",[t._v("没有更多了...")])]):t._e()],2)],1)])},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},"1fa8":function(t,e,a){},"29db":function(t,e,a){"use strict";a("4b50");var i=o(a("b0ce")),s=o(a("db8c"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))},"2dc0":function(t,e,a){"use strict";a.r(e);var i=a("01a1"),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=s.a},bf75:function(t,e,a){"use strict";var i=a("1fa8"),s=a.n(i);s.a},db8c:function(t,e,a){"use strict";a.r(e);var i=a("045c"),s=a("2dc0");for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a("bf75");var n=a("2877"),r=Object(n["a"])(s["default"],i["a"],i["b"],!1,null,"2b2fc550",null);e["default"]=r.exports}},[["29db","common/runtime","common/vendor"]]]);